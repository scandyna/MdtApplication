########################################
# Build & test Linux Gcc 7 X86_64
########################################

.buildAndTest_Linux_gcc7_x86_64_debug:
  image: registry.gitlab.com/scandyna/docker-images-ubuntu/ubuntu-18.04-xserver-build-tools:latest
  variables:
    CONAN_PROFILE: linux_gcc7_x86_64_qt_widgets_modules
    BUILD_TYPE: Debug
    BUILD_SHARED_LIBS: "True"

build_linux_gcc7_x86_64_debug:
  extends:
    - .buildAndTest_Linux_gcc7_x86_64_debug
    - .build_linux

test_linux_gcc7_x86_64_debug:
  extends:
    - .buildAndTest_Linux_gcc7_x86_64_debug
    - .test_linux
  dependencies:
    - build_linux_gcc7_x86_64_debug
  needs: ["build_linux_gcc7_x86_64_debug"]


.buildAndTest_Linux_gcc7_x86_64_release:
  image: registry.gitlab.com/scandyna/docker-images-ubuntu/ubuntu-18.04-xserver-build-tools:latest
  variables:
    CONAN_PROFILE: linux_gcc7_x86_64_qt_widgets_modules
    BUILD_TYPE: Release
    BUILD_SHARED_LIBS: "True"

build_linux_gcc7_x86_64_release:
  extends:
    - .buildAndTest_Linux_gcc7_x86_64_release
    - .build_linux

test_linux_gcc7_x86_64_release:
  extends:
    - .buildAndTest_Linux_gcc7_x86_64_release
    - .test_linux
  dependencies:
    - build_linux_gcc7_x86_64_release
  needs: ["build_linux_gcc7_x86_64_release"]


.buildAndTest_Linux_gcc7_x86_64_static_release:
  image: registry.gitlab.com/scandyna/docker-images-ubuntu/ubuntu-18.04-xserver-build-tools:latest
  variables:
    CONAN_PROFILE: linux_gcc7_x86_64_qt_widgets_modules
    BUILD_TYPE: Release
    BUILD_SHARED_LIBS: "False"

build_linux_gcc7_x86_64_static_release:
  extends:
    - .buildAndTest_Linux_gcc7_x86_64_static_release
    - .build_linux

test_linux_gcc7_x86_64_static_release:
  extends:
    - .buildAndTest_Linux_gcc7_x86_64_static_release
    - .test_linux
  dependencies:
    - build_linux_gcc7_x86_64_static_release
  needs: ["build_linux_gcc7_x86_64_static_release"]

########################################
# Build & test Linux Gcc 8 X86_64
########################################

.buildAndTest_Linux_gcc8_x86_64_debug:
  image: registry.gitlab.com/scandyna/docker-images-ubuntu/ubuntu-18.04-xserver-build-tools:latest
  variables:
    CONAN_PROFILE: linux_gcc8_x86_64_qt_widgets_modules
    BUILD_TYPE: Debug
    BUILD_SHARED_LIBS: "True"

build_linux_gcc8_x86_64_debug:
  extends:
    - .buildAndTest_Linux_gcc8_x86_64_debug
    - .build_linux

test_linux_gcc8_x86_64_debug:
  extends:
    - .buildAndTest_Linux_gcc8_x86_64_debug
    - .test_linux
  dependencies:
    - build_linux_gcc8_x86_64_debug
  needs: ["build_linux_gcc8_x86_64_debug"]


.buildAndTest_Linux_gcc8_x86_64_release:
  image: registry.gitlab.com/scandyna/docker-images-ubuntu/ubuntu-18.04-xserver-build-tools:latest
  variables:
    CONAN_PROFILE: linux_gcc8_x86_64_qt_widgets_modules
    BUILD_TYPE: Release
    BUILD_SHARED_LIBS: "True"

build_linux_gcc8_x86_64_release:
  extends:
    - .buildAndTest_Linux_gcc8_x86_64_release
    - .build_linux

test_linux_gcc8_x86_64_release:
  extends:
    - .buildAndTest_Linux_gcc8_x86_64_release
    - .test_linux
  dependencies:
    - build_linux_gcc8_x86_64_release
  needs: ["build_linux_gcc8_x86_64_release"]

########################################
# Build & test Linux Clang 6 X86_64
########################################

.buildAndTest_linux_clang6.0_x86_64_libc++:
  image: registry.gitlab.com/scandyna/docker-images-ubuntu/ubuntu-18.04-xserver-build-tools:latest
  variables:
    CONAN_PROFILE: linux_clang6.0_x86_64_libc++_qt_widgets_modules
    BUILD_SHARED_LIBS: "True"

build_linux_clang6.0_x86_64_libc++_Debug:
  variables:
    BUILD_TYPE: Debug
  extends:
    - .buildAndTest_linux_clang6.0_x86_64_libc++
    - .build_linux

test_linux_clang6.0_x86_64_libc++_Debug:
  variables:
    BUILD_TYPE: Debug
  extends:
    - .buildAndTest_linux_clang6.0_x86_64_libc++
    - .test_linux
  dependencies:
    - build_linux_clang6.0_x86_64_libc++_Debug
  needs: ["build_linux_clang6.0_x86_64_libc++_Debug"]

build_linux_clang6.0_x86_64_libc++_Release:
  variables:
    BUILD_TYPE: Release
  extends:
    - .buildAndTest_linux_clang6.0_x86_64_libc++
    - .build_linux

test_linux_clang6.0_x86_64_libc++_Release:
  variables:
    BUILD_TYPE: Release
  extends:
    - .buildAndTest_linux_clang6.0_x86_64_libc++
    - .test_linux
  dependencies:
    - build_linux_clang6.0_x86_64_libc++_Release
  needs: ["build_linux_clang6.0_x86_64_libc++_Release"]

############################################
# Build & test Linux Clang 6 X86_64 - TSan
############################################

.buildAndTest_linux_clang6.0_x86_64_libc++_TSan:
  image: registry.gitlab.com/scandyna/docker-images-ubuntu/ubuntu-18.04-xserver-build-tools:latest
  variables:
    CONAN_PROFILE: linux_clang6.0_x86_64_libc++_tsan_qt_widgets_modules
    BUILD_SHARED_LIBS: "True"

build_linux_clang6.0_x86_64_libc++_TSan:
  variables:
    BUILD_TYPE: RelWithDebInfo
  extends:
    - .buildAndTest_linux_clang6.0_x86_64_libc++_TSan
    - .build_linux

test_linux_clang6.0_x86_64_libc++_TSan:
  variables:
    BUILD_TYPE: RelWithDebInfo
  extends:
    - .buildAndTest_linux_clang6.0_x86_64_libc++_TSan
    - .test_linux
  dependencies:
    - build_linux_clang6.0_x86_64_libc++_TSan
  needs: ["build_linux_clang6.0_x86_64_libc++_TSan"]
